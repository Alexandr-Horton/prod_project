"use strict";(self.webpackChunkprod_project=self.webpackChunkprod_project||[]).push([[517],{8791:function(e,a,n){n.d(a,{I:function(){return o}});var t=n(7294),r=n(3007),s=n(5893);const o=(0,t.memo)((e=>{const{className:a,value:n,onChange:o,type:l="text",placeholder:d,autofocus:c,readonly:u,...i}=e,m=(0,t.useRef)(null),[v,h]=(0,t.useState)(!1),[p,x]=(0,t.useState)(0),f=v&&!u;return(0,t.useEffect)((()=>{var e;c&&(h(!0),null===(e=m.current)||void 0===e||e.focus())}),[c]),(0,s.jsxs)("div",{className:(0,r.A)("p_6dRLUG",{},[a]),children:[d&&(0,s.jsx)("div",{className:"uWIRRz2O",children:"".concat(d,">")}),(0,s.jsxs)("div",{className:"tDY7ayAp",children:[(0,s.jsx)("input",{ref:m,type:l,value:n,onChange:e=>{null==o||o(e.target.value),x(e.target.value.length)},className:"Z6IBiNl_",onFocus:()=>{h(!0)},onBlur:()=>{h(!1)},onSelect:e=>{var a;x((null==e||null===(a=e.target)||void 0===a?void 0:a.selectionStart)||0)},readOnly:u,...i}),f&&(0,s.jsx)("span",{className:"Y3U88xm_",style:{left:"".concat(9*p,"px")}})]})]})}))},169:function(e,a,n){n.d(a,{I:function(){return c}});var t=n(7294),r=n(3007),s={InputWrapper:"ZyI7rxIe",s:"mKldd7L_",m:"IyQiG8hL",l:"j7JcqtN4",addonLeft:"OqwwYwm8",addonRight:"o_xLYaZC",withAddonLeft:"zVArqqw4",withAddonRight:"HxXya_r8",focused:"jUzuVRdk",input:"L2BiQ3jT",readonly:"xspqW3a0"},o=n(9244),l=n(8969),d=n(5893);const c=(0,t.memo)((e=>{const{className:a,value:n,onChange:c,type:u="text",placeholder:i,autofocus:m,readonly:v,addonLeft:h,addonRight:p,label:x,size:f="m",...g}=e,j=(0,t.useRef)(null),[y,N]=(0,t.useState)(!1);(0,t.useEffect)((()=>{var e;m&&(N(!0),null===(e=j.current)||void 0===e||e.focus())}),[m]);const w={[s.readonly]:v,[s.focused]:y,[s.withAddonLeft]:Boolean(h),[s.withAddonRight]:Boolean(p)},C=(0,d.jsxs)("div",{className:(0,r.A)(s.InputWrapper,w,[a,s[f]]),children:[(0,d.jsx)("div",{className:s.addonLeft,children:h}),(0,d.jsx)("input",{ref:j,type:u,value:n,onChange:e=>{null==c||c(e.target.value)},className:s.input,onFocus:()=>{N(!0)},onBlur:()=>{N(!1)},readOnly:v,placeholder:i,...g}),(0,d.jsx)("div",{className:s.addonRight,children:p})]});return x?(0,d.jsxs)(o.U,{max:!0,gap:"8",children:[(0,d.jsx)(l.x,{text:x}),C]}):C}))},2517:function(e,a,n){n.r(a),n.d(a,{default:function(){return S}});var t=n(2327),r=n(743),s=n(7294),o=n(3007),l=n(7702),d=n(8791),c=n(526),u=n(8969),i=n(1233),m=n(5401);const v=e=>{var a;return(null==e||null===(a=e.loginForm)||void 0===a?void 0:a.username)||""},h=e=>{var a;return(null==e||null===(a=e.loginForm)||void 0===a?void 0:a.password)||""},p=e=>{var a;return(null==e||null===(a=e.loginForm)||void 0===a?void 0:a.isLoading)||!1},x=e=>{var a;return null==e||null===(a=e.loginForm)||void 0===a?void 0:a.error};var f=n(4268),g=n(8029);const j=(0,f.hg)("login/loginByUsername",(async(e,a)=>{const{extra:n,dispatch:t,rejectWithValue:r}=a;try{const a=await n.api.post("/login",e);if(!a.data)throw new Error;return t(g.hI.setAuthData(a.data)),a.data}catch(e){return console.log(e),r("error")}})),y=(0,f.oM)({name:"login",initialState:{isLoading:!1,username:"",password:""},reducers:{setUsername:(e,a)=>{e.username=a.payload},setPassword:(e,a)=>{e.password=a.payload}},extraReducers:e=>{e.addCase(j.pending,(e=>{e.error=void 0,e.isLoading=!0})).addCase(j.fulfilled,(e=>{e.isLoading=!1})).addCase(j.rejected,((e,a)=>{e.isLoading=!1,e.error=a.payload}))}}),{actions:N}=y,{reducer:w}=y;var C="xYNEfcE9",R="PQPa1eB5",I="Ok_5amJo",L=n(7499),A=n(8190),b=n(169),k=n(9244),E=n(877),O=n(5893);const U={loginForm:w};var S=(0,s.memo)((e=>{let{className:a,onSuccess:n}=e;const{t:f}=(0,t.$)(),g=(0,m.T)(),y=(0,r.v9)(v),w=(0,r.v9)(h),S=(0,r.v9)(p),_=(0,r.v9)(x),B=(0,E.N)(),F=(0,s.useCallback)((e=>{g(N.setUsername(e))}),[g]),z=(0,s.useCallback)((e=>{g(N.setPassword(e))}),[g]),W=(0,s.useCallback)((async()=>{"fulfilled"===(await g(j({username:y,password:w}))).meta.requestStatus&&(n(),B())}),[g,y,w,n,B]);return(0,O.jsx)(i.W,{removeAfterUnmount:!0,reducers:U,children:(0,O.jsx)(L.zJ,{feature:"isAppRedesigned",on:(0,O.jsxs)(k.g,{gap:"16",className:(0,o.A)(C,{},[a]),children:[(0,O.jsx)(u.x,{title:f("Форма авторизации")}),_&&(0,O.jsx)(u.x,{text:f("Вы ввели неверный логин или пароль"),variant:"error"}),(0,O.jsx)(b.I,{autofocus:!0,type:"text",className:R,placeholder:f("Введите username"),onChange:F,value:y}),(0,O.jsx)(b.I,{type:"text",className:R,placeholder:f("Введите пароль"),onChange:z,value:w}),(0,O.jsx)(A.z,{className:I,onClick:W,disabled:S,children:f("Войти")})]}),off:(0,O.jsxs)("div",{className:(0,o.A)(C,{},[a]),children:[(0,O.jsx)(c.xv,{title:f("Форма авторизации")}),_&&(0,O.jsx)(c.xv,{text:f("Вы ввели неверный логин или пароль"),theme:c.lg.ERROR}),(0,O.jsx)(d.I,{autofocus:!0,type:"text",className:R,placeholder:f("Введите username"),onChange:F,value:y}),(0,O.jsx)(d.I,{type:"text",className:R,placeholder:f("Введите пароль"),onChange:z,value:w}),(0,O.jsx)(l.zx,{theme:l.bn.OUTLINE,className:I,onClick:W,disabled:S,children:f("Войти")})]})})})}))},1233:function(e,a,n){n.d(a,{W:function(){return o}});var t=n(7294),r=n(743),s=n(5893);const o=e=>{const{children:a,reducers:n,removeAfterUnmount:o=!0}=e,l=(0,r.oR)(),d=(0,r.I0)();return(0,t.useEffect)((()=>{const e=l.reducerManager.getMountedReducers();return Object.entries(n).forEach((a=>{let[n,t]=a;e[n]||(l.reducerManager.add(n,t),d({type:"@INIT ".concat(n," reducer")}))})),()=>{o&&Object.entries(n).forEach((e=>{let[a,n]=e;l.reducerManager.remove(a),d({type:"@DESTROY ".concat(a," reducer")})}))}}),[]),(0,s.jsx)(s.Fragment,{children:a})}}}]);