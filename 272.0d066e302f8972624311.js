"use strict";(self.webpackChunkprod_project=self.webpackChunkprod_project||[]).push([[272],{8791:function(e,t,n){n.d(t,{I:function(){return r}});var a=n(7294),s=n(3007),l=n(5893);const r=(0,a.memo)((e=>{const{className:t,value:n,onChange:r,type:i="text",placeholder:c,autofocus:o,readonly:d,...u}=e,h=(0,a.useRef)(null),[x,p]=(0,a.useState)(!1),[f,j]=(0,a.useState)(0),m=x&&!d;return(0,a.useEffect)((()=>{var e;o&&(p(!0),null===(e=h.current)||void 0===e||e.focus())}),[o]),(0,l.jsxs)("div",{className:(0,s.A)("p_6dRLUG",{},[t]),children:[c&&(0,l.jsx)("div",{className:"uWIRRz2O",children:"".concat(c,">")}),(0,l.jsxs)("div",{className:"tDY7ayAp",children:[(0,l.jsx)("input",{ref:h,type:i,value:n,onChange:e=>{null==r||r(e.target.value),j(e.target.value.length)},className:"Z6IBiNl_",onFocus:()=>{p(!0)},onBlur:()=>{p(!1)},onSelect:e=>{var t;j((null==e||null===(t=e.target)||void 0===t?void 0:t.selectionStart)||0)},readOnly:d,...u}),m&&(0,l.jsx)("span",{className:"Y3U88xm_",style:{left:"".concat(9*f,"px")}})]})]})}))},169:function(e,t,n){n.d(t,{I:function(){return o}});var a=n(7294),s=n(3007),l={InputWrapper:"ZyI7rxIe",s:"mKldd7L_",m:"IyQiG8hL",l:"j7JcqtN4",addonLeft:"OqwwYwm8",addonRight:"o_xLYaZC",withAddonLeft:"zVArqqw4",withAddonRight:"HxXya_r8",focused:"jUzuVRdk",input:"L2BiQ3jT",readonly:"xspqW3a0"},r=n(9244),i=n(8969),c=n(5893);const o=(0,a.memo)((e=>{const{className:t,value:n,onChange:o,type:d="text",placeholder:u,autofocus:h,readonly:x,addonLeft:p,addonRight:f,label:j,size:m="m",...g}=e,v=(0,a.useRef)(null),[C,k]=(0,a.useState)(!1);(0,a.useEffect)((()=>{var e;h&&(k(!0),null===(e=v.current)||void 0===e||e.focus())}),[h]);const y={[l.readonly]:x,[l.focused]:C,[l.withAddonLeft]:Boolean(p),[l.withAddonRight]:Boolean(f)},L=(0,c.jsxs)("div",{className:(0,s.A)(l.InputWrapper,y,[t,l[m]]),children:[(0,c.jsx)("div",{className:l.addonLeft,children:p}),(0,c.jsx)("input",{ref:v,type:d,value:n,onChange:e=>{null==o||o(e.target.value)},className:l.input,onFocus:()=>{k(!0)},onBlur:()=>{k(!1)},readOnly:x,placeholder:u,...g}),(0,c.jsx)("div",{className:l.addonRight,children:f})]});return j?(0,c.jsxs)(r.U,{max:!0,gap:"8",children:[(0,c.jsx)(i.x,{text:j}),L]}):L}))},9272:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var a,s=n(2327),l=n(7294),r=n(743),i=n(5518),c=n(7647),o=n(9244),d=n(526),u=n(8969),h=n(3007),x=n(5635);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},p.apply(this,arguments)}var f=e=>l.createElement("svg",p({width:"1em",height:"1em",viewBox:"0 0 24 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=l.createElement("path",{d:"M11.0746 1.633C11.3946 0.789 12.6056 0.789 12.9266 1.633L14.9966 7.367C15.0688 7.55379 15.1959 7.71428 15.3613 7.8273C15.5266 7.94031 15.7223 8.00053 15.9226 8H21.0096C21.9496 8 22.3596 9.17 21.6206 9.743L18.0006 13C17.8384 13.1247 17.7199 13.2975 17.6621 13.4937C17.6042 13.6898 17.61 13.8993 17.6786 14.092L19.0006 19.695C19.3226 20.595 18.2806 21.368 17.4926 20.814L12.5756 17.694C12.4072 17.5757 12.2064 17.5122 12.0006 17.5122C11.7948 17.5122 11.594 17.5757 11.4256 17.694L6.50856 20.814C5.72156 21.368 4.67856 20.594 5.00056 19.695L6.32257 14.092C6.39114 13.8993 6.39692 13.6898 6.33907 13.4937C6.28122 13.2975 6.16272 13.1247 6.00057 13L2.38056 9.743C1.64056 9.17 2.05256 8 2.99056 8H8.07756C8.27786 8.00067 8.47363 7.9405 8.63898 7.82747C8.80433 7.71444 8.93147 7.55387 9.00357 7.367L11.0736 1.633H11.0746Z",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}))),j=n(7499),m=n(7650),g=n(5893);const v=[1,2,3,4,5],C=(0,l.memo)((e=>{const{className:t,size:n=30,selectedStars:a=0,onSelect:s}=e,[r,i]=(0,l.useState)(a),[c,o]=(0,l.useState)(Boolean(a)),d=()=>{c||i(0)},u=e=>()=>{c||(null==s||s(e),i(e),o(!0))};return(0,g.jsx)("div",{className:(0,h.A)((0,j.tn)({name:"isAppRedesigned",off:()=>"kxtOyXZf",on:()=>"DJmR4hmO"}),{},[t]),children:v.map((e=>{const t={className:(0,h.A)("_at8s_rB",{LIFf2ipz:c},[r>=e?"tJW47b5h":"KwJSFqOR"]),Svg:f,key:e,width:n,height:n,onMouseLeave:d,onMouseEnter:(a=e,()=>{c||i(a)}),onClick:u(e),"data-testid":"StarRating.".concat(e),"data-selected":r>=e};var a;return(0,g.jsx)(j.zJ,{feature:"isAppRedesigned",on:(0,g.jsx)(m.J,{clickable:!c,...t}),off:(0,g.jsx)(x.J,{...t})})}))})}));var k=n(5301),y=n(8791),L=n(7702),R=n(8787),b=n(169),z=n(8190),A=n(7231);const I=(0,l.memo)((e=>{const{className:t,onAccept:n,feedbackTitle:a,hasFeedback:r,onCancel:h,title:x,rate:p=0}=e,{t:f}=(0,s.$)(),[m,v]=(0,l.useState)(!1),[I,N]=(0,l.useState)(p),[w,S]=(0,l.useState)(""),O=(0,l.useCallback)((e=>{N(e),r?v(!0):null==n||n(e)}),[r,n]),J=(0,l.useCallback)((()=>{v(!1),null==n||n(I,w)}),[w,n,I]),_=(0,l.useCallback)((()=>{v(!1),null==h||h(I)}),[h,I]),q=(0,g.jsx)(j.zJ,{feature:"isAppRedesigned",on:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(u.x,{title:a}),(0,g.jsx)(b.I,{value:w,onChange:S,placeholder:f("Ваш отзыв")})]}),off:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.xv,{title:a}),(0,g.jsx)(y.I,{value:w,onChange:S,placeholder:f("Ваш отзыв")})]})}),B=(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(o.g,{align:"center",gap:"8",max:!0,children:[(0,g.jsx)(j.zJ,{feature:"isAppRedesigned",on:(0,g.jsx)(u.x,{title:I?f("Спасибо за оценку!"):x}),off:(0,g.jsx)(d.xv,{title:I?f("Спасибо за оценку!"):x})}),(0,g.jsx)(C,{selectedStars:I,size:40,onSelect:O})]}),(0,g.jsx)(i.I3,{children:(0,g.jsx)(k.u,{isOpen:m,lazy:!0,children:(0,g.jsxs)(o.g,{max:!0,gap:"32",children:[q,(0,g.jsx)(j.zJ,{feature:"isAppRedesigned",on:(0,g.jsxs)(o.U,{max:!0,gap:"16",justify:"end",children:[(0,g.jsx)(z.z,{onClick:_,children:f("Закрыть")}),(0,g.jsx)(z.z,{onClick:J,children:f("Отправить")})]}),off:(0,g.jsxs)(o.U,{max:!0,gap:"16",justify:"end",children:[(0,g.jsx)(L.zx,{onClick:_,theme:L.bn.OUTLINE_RED,children:f("Закрыть")}),(0,g.jsx)(L.zx,{onClick:J,children:f("Отправить")})]})})]})})}),(0,g.jsx)(i.$,{children:(0,g.jsx)(R.d,{isOpen:m,lazy:!0,onClose:_,children:(0,g.jsxs)(o.g,{gap:"32",children:[q,(0,g.jsx)(j.zJ,{feature:"isAppRedesigned",on:(0,g.jsx)(z.z,{fullWidth:!0,onClick:J,size:"l",children:f("Отправить")}),off:(0,g.jsx)(L.zx,{fullWidth:!0,onClick:J,size:L.qE.L,children:f("Отправить")})})]})})})]});return(0,g.jsx)(j.zJ,{feature:"isAppRedesigned",on:(0,g.jsx)(A.Z,{fullWidth:!0,border:"partial",padding:"24",children:B}),off:(0,g.jsx)(c.Z,{className:t,max:!0,children:B})})})),N=n(6628).p.injectEndpoints({endpoints:e=>({getArticleRating:e.query({query:e=>{let{articleId:t,userId:n}=e;return{url:"/article-ratings",params:{userId:n,articleId:t}}}}),rateArticle:e.mutation({query:e=>({url:"/article-ratings",method:"POST",body:e})})})}),w=N.useGetArticleRatingQuery,S=N.useRateArticleMutation;var O=n(8029),J=n(8281),_=(0,l.memo)((e=>{var t;const{className:n,articleId:a}=e,{t:i}=(0,s.$)(),c=(0,r.v9)(O.m5),{data:o,isLoading:d}=w({articleId:a,userId:null!==(t=null==c?void 0:c.id)&&void 0!==t?t:""}),[u]=S(),h=(0,l.useCallback)(((e,t)=>{try{var n;u({userId:null!==(n=null==c?void 0:c.id)&&void 0!==n?n:"",articleId:a,rate:e,feedback:t})}catch(e){console.log(e)}}),[a,u,null==c?void 0:c.id]),x=(0,l.useCallback)(((e,t)=>{h(e,t)}),[h]),p=(0,l.useCallback)((e=>{h(e)}),[h]);if(d)return(0,g.jsx)(J.O,{width:"100%",height:120});const f=null==o?void 0:o[0];return(0,g.jsx)(I,{onCancel:p,onAccept:x,rate:null==f?void 0:f.rate,className:n,title:i("Оцените статью"),feedbackTitle:i("Оставьте свой отзыв о статье, это поможет улучшить качество"),hasFeedback:!0})}))}}]);